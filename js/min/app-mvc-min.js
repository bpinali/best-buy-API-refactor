var bestBuy={},walmart={};bestBuy.Model=function(){},walmart.Model=function(){},walmart.Model.prototype.getWalmartResults=function(t){$.ajax({method:"GET",url:"http://api.walmartlabs.com/v1/search",data:{apiKey:"d76akfju4ezu6f97h7crev9b",numItems:24,query:t},dataType:"jsonp"}).done(this.ajaxDone.bind(this)).fail(this.ifResultsFail.bind(this))},bestBuy.Model.prototype.getBestBuyResults=function(t){var e="https://api.bestbuy.com/v1/products((name="+t+"*)&type!=BlackTie&customerTopRated=true)?sort=salesRankShortTerm.asc";$.ajax({method:"GET",url:e,data:{format:"json",apiKey:"t5reggzup769kevta2bdabkx",page:1,pageSize:24},cache:!0,preowned:!1,active:!0,dataType:"jsonp"}).done(this.ajaxDone.bind(this)).fail(this.ifResultsFail.bind(this))},walmart.Model.prototype.ajaxDone=function(t){console.log(t);var e="";0===t.items.length?alert("No Results Found!"):walmart.View.prototype.resultsIntoListItem(t)},bestBuy.Model.prototype.ajaxDone=function(t){console.log(t);var e="";0===t.products.length?alert("No Results Found!"):bestBuy.View.prototype.resultsIntoListItem(t)},walmart.Model.prototype.ifResultsFail=function(t,e,o){console.log(t),console.log(e),console.log(o)},bestBuy.Model.prototype.ifResultsFail=function(t,e,o){console.log(t),console.log(e),console.log(o)},walmart.View=function(){this.searchBox=$("#search-box"),this.loadingAnimation=!0,this.toggleAnimation()},bestBuy.View=function(){this.searchBox=$("#search-box"),this.loadingAnimation=!0,this.toggleAnimation()},walmart.View.prototype.resultsIntoListItem=function(t){var e="";e=!t.error&&t.items?t.items.reduce(this.reduceItemResult,""):"Unable to access products (see browser console for more information)",$(".walmart-results ul").html(e),$(".clamp-this").each(function(t,e){$clamp(e,{clamp:3})})},bestBuy.View.prototype.resultsIntoListItem=function(t){var e="";e=!t.error&&t.products?t.products.reduce(this.reduceItemResult,""):"Unable to access products (see browser console for more information)",$(".best-buy-results ul").html(e),$(".clamp-this").each(function(t,e){$clamp(e,{clamp:3})})},walmart.View.prototype.reduceItemResult=function(t,e){var o=$("#walmart-product-list-item").html(),s=Handlebars.compile(o);return e.isSale=e.salePrice<e.regularPrice&&e.salePrice,t+=s(e)},bestBuy.View.prototype.reduceItemResult=function(t,e){var o=$("#best-buy-product-list-item").html(),s=Handlebars.compile(o);return e.isSale=e.salePrice<e.regularPrice&&e.salePrice,t+=s(e)},walmart.View.prototype.toggleAnimation=function(){this.loadingAnimation?$(".loader").fadeOut("slow"):$(".loader").fadeIn("slow"),this.loadingAnimation=!this.loadingAnimation},bestBuy.View.prototype.toggleAnimation=function(){this.loadingAnimation?$(".loader").fadeOut("slow"):$(".loader").fadeIn("slow"),this.loadingAnimation=!this.loadingAnimation},walmart.Controller=function(t,e){e.getWalmartResults=t.getWalmartResults.bind(t),t.resultsIntoListItem=e.resultsIntoListItem.bind(e)},bestBuy.Controller=function(t,e){e.getBestBuyResults=t.getBestBuyResults.bind(t),t.resultsIntoListItem=e.resultsIntoListItem.bind(e)},document.addEventListener("DOMContentLoaded",function(){var t=new bestBuy.Model,e=new bestBuy.View,o=new bestBuy.Controller(t,e),s=new walmart.Model,a=new walmart.View,l=new walmart.Controller(s,a)}),$(document).ready(function(){$("#search-button").on("click",function(){searchTerm=$("#search-box").val(),walmart.Model.prototype.getWalmartResults(searchTerm),bestBuy.Model.prototype.getBestBuyResults(searchTerm)})}),$(document).on("keypress",function(t){13===t.keyCode&&(searchTerm=$("#search-box").val(),walmart.Model.prototype.getWalmartResults(searchTerm),bestBuy.Model.prototype.getBestBuyResults(searchTerm))});