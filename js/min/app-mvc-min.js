var bestBuy={};bestBuy.Model=function(){},bestBuy.Model.prototype.getResults=function(t){var e="https://crossorigin.me/https://api.bestbuy.com/v1/products((name="+t+"*)&type!=BlackTie&customerTopRated=true)?sort=salesRankShortTerm.asc";$.ajax({method:"GET",url:e,data:{format:"json",apiKey:"t5reggzup769kevta2bdabkx",page:1,pageSize:36},cache:!0,preowned:!1,active:!0,dataType:"jsonp"}).done(this.ajaxDone.bind(this)).fail(this.ifResultsFail.bind(this))},bestBuy.Model.prototype.ajaxDone=function(t){var e="";0==t.products.length?alert("No Results Found!"):this.resultsIntoListItem(t)},bestBuy.Model.prototype.ifResultsFail=function(t,e,o){console.log(t),console.log(e),console.log(o)},bestBuy.View=function(){this.searchBox=$("#search-box"),this.loadingAnimation=!0,this.toggleAnimation(),$("#search-button").on("click",this.getUserQuery.bind(this)),$(document).on("keypress",function(t){13==t.keyCode&&this.getUserQuery()}.bind(this))},bestBuy.View.prototype.getUserQuery=function(){this.getResults&&this.getResults(this.searchBox.val()),this.searchBox.val("")},bestBuy.View.prototype.resultsIntoListItem=function(t){var e="";e=!t.error&&t.products?t.products.reduce(this.reduceItemResult,""):"Unable to access products (see browser console for more information)",$(".results ul").html(e),$(".clamp-this").each(function(t,e){$clamp(e,{clamp:3})})},bestBuy.View.prototype.reduceItemResult=function(t,e){var o=$("#product-list-item").html(),s=Handlebars.compile(o);return e.isSale=e.salePrice<e.regularPrice&&e.salePrice,t+=s(e)},bestBuy.View.prototype.toggleAnimation=function(){this.loadingAnimation?$(".loader").fadeOut("slow"):$(".loader").fadeIn("slow"),this.loadingAnimation=!this.loadingAnimation},bestBuy.Controller=function(t,e){e.getResults=t.getResults.bind(t),t.resultsIntoListItem=e.resultsIntoListItem.bind(e)},document.addEventListener("DOMContentLoaded",function(){var t=new bestBuy.Model,e=new bestBuy.View,o=new bestBuy.Controller(t,e)});